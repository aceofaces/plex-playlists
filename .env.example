# Plex Server Configuration
PLEX_BASE_URL=http://localhost:32400
PLEX_AUTH_TOKEN=your-plex-token-here

# Plex API timeout in milliseconds (default: 120000 = 2 minutes)
# Increase this if you have a large library and experience timeout errors
# PLEX_TIMEOUT=120000

# Data Storage
# Directory paths (local dev uses relative paths, Docker uses absolute)
# CONFIG_DIR=./config  # Local default
# DATA_DIR=./data      # Local default
# Docker will override these to /config and /data automatically

DATABASE_PATH=./data/plex-playlists.db
# Local: ./data/plex-playlists.db (default)
# Docker: /data/plex-playlists.db (set by Docker env)

# Web UI Configuration
# Enable/disable web UI server (default: true)
WEB_UI_ENABLED=true
# Port for web UI (default: 8687)
WEB_UI_PORT=8687

# Optional: Last.fm API for genre enrichment
# Get free API key at: https://www.last.fm/api/account/create
# LASTFM_API_KEY=your-lastfm-api-key-here

# Optional: Spotify API for genre enrichment
# Create app at: https://developer.spotify.com/dashboard
# SPOTIFY_CLIENT_ID=your-spotify-client-id
# SPOTIFY_CLIENT_SECRET=your-spotify-client-secret

# Cache Warming Configuration
# Automatic background cache warming for genre metadata
# Default concurrency: 10 (safely under Spotify's ~180 req/min rate limit)
CACHE_WARM_CONCURRENCY=10
# Weekly full cache warming (Sunday 3am)
CACHE_WARM_CRON=0 3 * * 0
# Daily refresh of expiring entries (2am, before playlist generation at 5am)
CACHE_REFRESH_CRON=0 2 * * *

# Scheduling (cron format)
# Daily time-based playlists
# All three daily playlists (morning, afternoon, evening) run sequentially at 5am
# Time-based history filtering is preserved (morning playlist still uses 6-11am history)
DAILY_PLAYLISTS_CRON=0 5 * * *

# Genre-based playlists are configured in playlists.config.json
# See that file for pinned genres and auto-discovery settings

# Scoring Parameters
# Half-life for recency decay in days (default: 7)
# A track played 7 days ago has 50% the recency weight of one played today
HALF_LIFE_DAYS=7

# Maximum percentage of playlist from a single genre (default: 0.4 = 40%)
MAX_GENRE_SHARE=0.4

# Play count saturation threshold (default: 25)
# Play counts above this value are normalized to 1.0 in scoring
PLAY_COUNT_SATURATION=25

# Playlist Generation Settings
# Target number of tracks per playlist (default: 50)
PLAYLIST_TARGET_SIZE=50

# Maximum tracks per artist in a playlist (default: 2)
MAX_PER_ARTIST=2

# Number of days of history to analyze (default: 30)
HISTORY_DAYS=30

# Maximum tracks to fetch for fallback candidates (default: 200)
# Lower values reduce Plex API timeout risk but may limit variety
FALLBACK_LIMIT=200

# Adaptive PlayQueue (Beta)
# Requires Plex Pass subscription (webhooks are premium feature)
# Real-time queue adaptation based on skip patterns during playback
# Default: false (opt-in)
# ADAPTIVE_QUEUE_ENABLED=false

# Sensitivity level (1-10, higher = more aggressive adaptations)
# ADAPTIVE_SENSITIVITY=5

# Minimum skips to trigger pattern detection
# ADAPTIVE_MIN_SKIP_COUNT=2

# Time window for pattern detection (minutes)
# ADAPTIVE_WINDOW_MINUTES=5

# Cooldown between adaptations (seconds)
# ADAPTIVE_COOLDOWN_SECONDS=10
